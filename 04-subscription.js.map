{"version":3,"file":"04-subscription.js","sources":["../src/js/04-subscription.js"],"sourcesContent":["import '../css/style.css';\nimport * as BSN from 'bootstrap.native';\n\nconst refs = {\n  modal: document.querySelector('#subscription-modal'),\n  subscribeBtn: document.querySelector('button[data-subscribe]'),\n  dismissBtn: document.querySelector('button[data-dismiss=\"modal\"]'),\n};\n\nconst modal = new BSN.Modal('#subscription-modal');\n\nconst PROMPT_DELAY = 3000;\nconst MAX_PROMPT_ATTEMPTS = 3;\nlet promptCounter = 0;\nlet hasSubscribed = false;\n\nopenModal();\n\nrefs.modal.addEventListener('hide.bs.modal', openModal);\nrefs.subscribeBtn.addEventListener('click', onSubscribeBtnClick);\nrefs.dismissBtn.addEventListener('click', onDismissBtnClick);\n\nfunction openModal() {\n  if (promptCounter === MAX_PROMPT_ATTEMPTS || hasSubscribed) {\n    console.log('Максимальное кол-во надоеданий или подписался');\n    return;\n  }\n\n  setTimeout(() => {\n    console.log('Открываем надоедалку');\n    modal.show();\n    promptCounter += 1;\n  }, PROMPT_DELAY);\n}\n\nfunction onSubscribeBtnClick() {\n  hasSubscribed = true;\n  modal.hide();\n}\n\nfunction onDismissBtnClick() {\n  modal.hide();\n}\n"],"names":["refs","modal","BSN.Modal","PROMPT_DELAY","MAX_PROMPT_ATTEMPTS","promptCounter","hasSubscribed","openModal","onSubscribeBtnClick","onDismissBtnClick"],"mappings":"uIAGA,MAAMA,EAAO,CACX,MAAO,SAAS,cAAc,qBAAqB,EACnD,aAAc,SAAS,cAAc,wBAAwB,EAC7D,WAAY,SAAS,cAAc,8BAA8B,CACnE,EAEMC,EAAQ,IAAIC,EAAU,qBAAqB,EAE3CC,EAAe,IACfC,EAAsB,EAC5B,IAAIC,EAAgB,EAChBC,EAAgB,GAEpBC,EAAW,EAEXP,EAAK,MAAM,iBAAiB,gBAAiBO,CAAS,EACtDP,EAAK,aAAa,iBAAiB,QAASQ,CAAmB,EAC/DR,EAAK,WAAW,iBAAiB,QAASS,CAAiB,EAE3D,SAASF,GAAY,CACnB,GAAIF,IAAkBD,GAAuBE,EAAe,CAC1D,QAAQ,IAAI,+CAA+C,EAC3D,MACJ,CAEE,WAAW,IAAM,CACf,QAAQ,IAAI,sBAAsB,EAClCL,EAAM,KAAM,EACZI,GAAiB,CAClB,EAAEF,CAAY,CACjB,CAEA,SAASK,GAAsB,CAC7BF,EAAgB,GAChBL,EAAM,KAAM,CACd,CAEA,SAASQ,GAAoB,CAC3BR,EAAM,KAAM,CACd"}